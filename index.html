<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doodle Launcher</title>
    <style>
        :root {
            --main-color: #FF6B6B;
            --bg-color: #FFF5E6;
            --card-color: #FFF;
            --text-color: #333;
            --shadow: 3px 3px 0 rgba(0,0,0,0.2);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            user-select: none;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255,200,200,0.2) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(200,255,200,0.2) 0%, transparent 20%);
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 3px dashed var(--main-color);
        }

        h1 {
            font-size: 2.5rem;
            color: var(--main-color);
            text-shadow: var(--shadow);
        }

        .theme-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--main-color);
            border: 2px solid var(--text-color);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: var(--shadow);
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .game-card {
            background: var(--card-color);
            border: 3px solid var(--text-color);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 5px 5px 0 rgba(0,0,0,0.3);
        }

        .game-icon {
            width: 60px;
            height: 60px;
            background: var(--main-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 30px;
            border: 2px solid var(--text-color);
        }

        .game-title {
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: 10px;
        }

        .game-desc {
            text-align: center;
            opacity: 0.8;
            font-size: 0.9rem;
        }

        /* –û–≤–µ—Ä–ª–µ–π –∏–≥—Ä—ã */
        .game-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .game-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .game-container {
            background: var(--card-color);
            border: 3px solid var(--text-color);
            border-radius: 15px;
            padding: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow: auto;
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--main-color);
            border: 2px solid var(--text-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
        }

        /* –¢–µ–º—ã */
        .dark-theme {
            --main-color: #6B6BFF;
            --bg-color: #222;
            --card-color: #333;
            --text-color: #EEE;
        }

        .green-theme {
            --main-color: #4CAF50;
            --bg-color: #E8F5E9;
            --card-color: #C8E6C9;
            --text-color: #2E7D32;
        }

        .pink-theme {
            --main-color: #FF4081;
            --bg-color: #FCE4EC;
            --card-color: #F8BBD0;
            --text-color: #AD1457;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .floating {
            animation: float 3s ease-in-out infinite;
        }
    </style>
</head>
<body class="default-theme">
    <div class="container">
        <header>
            <h1>Doodle Launcher</h1>
            <div class="theme-btn" id="themeBtn">üé®</div>
        </header>

        <div class="games-grid">
            <!-- –ò–≥—Ä–∞ 1: –ü–æ–Ω–≥ -->
            <div class="game-card" data-game="pong">
                <div class="game-icon">üèì</div>
                <h3 class="game-title">Doodle Pong</h3>
                <p class="game-desc">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø–æ–Ω–≥ —Å –≤–µ—Å—ë–ª–æ–π —Ñ–∏–∑–∏–∫–æ–π</p>
            </div>

            <!-- –ò–≥—Ä–∞ 2: –ó–º–µ–π–∫–∞ -->
            <div class="game-card" data-game="snake">
                <div class="game-icon">üêç</div>
                <h3 class="game-title">–ì–æ–ª–æ–¥–Ω–∞—è –ó–º–µ–π–∫–∞</h3>
                <p class="game-desc">–°–æ–±–µ—Ä–∏ —Ñ—Ä—É–∫—Ç—ã –∏ –Ω–µ –≤—Ä–µ–∂—å—Å—è –≤ —Ö–≤–æ—Å—Ç!</p>
            </div>

            <!-- –ò–≥—Ä–∞ 3: –ü–ª–∞—Ç—Ñ–æ—Ä–º–µ—Ä -->
            <div class="game-card" data-game="platformer">
                <div class="game-icon">üëæ</div>
                <h3 class="game-title">–ü—Ä—ã–≥-–°–∫–æ–∫</h3>
                <p class="game-desc">–ü—Ä—ã–≥–∞–π –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º –∏ —Å–æ–±–∏—Ä–∞–π –∑–≤—ë–∑–¥—ã</p>
            </div>

            <!-- –ò–≥—Ä–∞ 4: –¢–µ—Ç—Ä–∏—Å -->
            <div class="game-card" data-game="tetris">
                <div class="game-icon">üßä</div>
                <h3 class="game-title">–ë–ª–æ–∫–æ–≤—ã–π –¢–µ—Ç—Ä–∏—Å</h3>
                <p class="game-desc">–ö–ª–∞—Å—Å–∏–∫–∞ –≤ –∫–∞—Ä–∞–Ω–¥–∞—à–Ω–æ–º —Å—Ç–∏–ª–µ</p>
            </div>

            <!-- –ò–≥—Ä–∞ 5: –ê—Ä–∫–∞–Ω–æ–∏–¥ -->
            <div class="game-card" data-game="arkanoid">
                <div class="game-icon">üéØ</div>
                <h3 class="game-title">–†–∞–∑–±–µ–π –ö–∏—Ä–ø–∏—á–∏</h3>
                <p class="game-desc">–†–∞–∑—Ä—É—à–∞–π –±–ª–æ–∫–∏ –º—è—á–∏–∫–æ–º</p>
            </div>
        </div>
    </div>

    <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è –∏–≥—Ä -->
    <div class="game-overlay" id="gameOverlay">
        <div class="game-container" id="gameContainer">
            <div class="close-btn" id="closeBtn">‚úï</div>
            <div id="gameContent"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // –≠–ª–µ–º–µ–Ω—Ç—ã
            const themeBtn = document.getElementById('themeBtn');
            const gameCards = document.querySelectorAll('.game-card');
            const gameOverlay = document.getElementById('gameOverlay');
            const gameContent = document.getElementById('gameContent');
            const closeBtn = document.getElementById('closeBtn');

            // –¢–µ–∫—É—â–∞—è —Ç–µ–º–∞
            let currentTheme = 'default';
            const themes = ['default', 'dark', 'green', 'pink'];

            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
            themeBtn.addEventListener('click', () => {
                const currentIndex = themes.indexOf(currentTheme);
                const nextIndex = (currentIndex + 1) % themes.length;
                currentTheme = themes[nextIndex];
                document.body.className = `${currentTheme}-theme`;
            });

            // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
            gameCards.forEach(card => {
                card.addEventListener('click', () => {
                    const game = card.dataset.game;
                    loadGame(game);
                });
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –∏–≥—Ä—ã
            closeBtn.addEventListener('click', () => {
                gameOverlay.classList.remove('active');
                gameContent.innerHTML = '';
            });

            // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã
            function loadGame(game) {
                gameContent.innerHTML = '';
                
                // –°–æ–∑–¥–∞–µ–º canvas –¥–ª—è –∏–≥—Ä—ã
                const canvas = document.createElement('canvas');
                canvas.width = 500;
                canvas.height = 500;
                canvas.style.border = '2px dashed var(--text-color)';
                canvas.style.borderRadius = '10px';
                canvas.style.maxWidth = '100%';
                gameContent.appendChild(canvas);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–≤–µ—Ä–ª–µ–π
                gameOverlay.classList.add('active');

                // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∏–≥—Ä—É
                switch(game) {
                    case 'pong':
                        initPong(canvas);
                        break;
                    case 'snake':
                        initSnake(canvas);
                        break;
                    case 'platformer':
                        initPlatformer(canvas);
                        break;
                    case 'tetris':
                        initTetris(canvas);
                        break;
                    case 'arkanoid':
                        initArkanoid(canvas);
                        break;
                }
            }

            // ===== –ò–ì–†–ê 1: –ü–û–ù–ì =====
            function initPong(canvas) {
                const ctx = canvas.getContext('2d');
                canvas.width = 500;
                canvas.height = 300;
                
                // –ò–≥—Ä–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã
                const ball = {
                    x: canvas.width / 2,
                    y: canvas.height / 2,
                    radius: 10,
                    dx: 5,
                    dy: 5
                };
                
                const paddleHeight = 80;
                const paddleWidth = 10;
                
                const player = {
                    x: 10,
                    y: canvas.height / 2 - paddleHeight / 2,
                    width: paddleWidth,
                    height: paddleHeight,
                    dy: 0,
                    speed: 8
                };
                
                const computer = {
                    x: canvas.width - paddleWidth - 10,
                    y: canvas.height / 2 - paddleHeight / 2,
                    width: paddleWidth,
                    height: paddleHeight,
                    dy: 4
                };
                
                let playerScore = 0;
                let computerScore = 0;
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
                document.addEventListener('keydown', keyDown);
                document.addEventListener('keyup', keyUp);
                
                function keyDown(e) {
                    if (e.key === 'ArrowUp') player.dy = -player.speed;
                    if (e.key === 'ArrowDown') player.dy = player.speed;
                }
                
                function keyUp(e) {
                    if (e.key === 'ArrowUp' || e.key === 'ArrowDown') player.dy = 0;
                }
                
                // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
                function gameLoop() {
                    // –û—á–∏—Å—Ç–∫–∞ canvas
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // –†–∏—Å—É–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å–Ω—É—é –ª–∏–Ω–∏—é
                    ctx.beginPath();
                    ctx.setLineDash([5, 5]);
                    ctx.moveTo(canvas.width / 2, 0);
                    ctx.lineTo(canvas.width / 2, canvas.height);
                    ctx.strokeStyle = 'var(--text-color)';
                    ctx.stroke();
                    ctx.setLineDash([]);
                    
                    // –†–∏—Å—É–µ–º –º—è—á
                    ctx.beginPath();
                    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
                    ctx.fillStyle = 'var(--main-color)';
                    ctx.fill();
                    ctx.closePath();
                    
                    // –†–∏—Å—É–µ–º —Ä–∞–∫–µ—Ç–∫–∏
                    ctx.fillStyle = 'var(--text-color)';
                    ctx.fillRect(player.x, player.y, player.width, player.height);
                    ctx.fillRect(computer.x, computer.y, computer.width, computer.height);
                    
                    // –†–∏—Å—É–µ–º —Å—á—ë—Ç
                    ctx.font = '30px "Comic Sans MS", cursive';
                    ctx.fillText(playerScore, canvas.width / 4, 50);
                    ctx.fillText(computerScore, 3 * canvas.width / 4, 50);
                    
                    // –î–≤–∏–∂–µ–Ω–∏–µ –º—è—á–∞
                    ball.x += ball.dx;
                    ball.y += ball.dy;
                    
                    // –û—Ç—Å–∫–æ–∫ –æ—Ç —Å—Ç–µ–Ω
                    if (ball.y + ball.radius > canvas.height || ball.y - ball.radius < 0) {
                        ball.dy = -ball.dy;
                    }
                    
                    // –û—Ç—Å–∫–æ–∫ –æ—Ç —Ä–∞–∫–µ—Ç–æ–∫
                    if (
                        ball.x - ball.radius < player.x + player.width &&
                        ball.y > player.y &&
                        ball.y < player.y + player.height
                    ) {
                        ball.dx = -ball.dx * 1.05; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å
                    }
                    
                    if (
                        ball.x + ball.radius > computer.x &&
                        ball.y > computer.y &&
                        ball.y < computer.y + computer.height
                    ) {
                        ball.dx = -ball.dx * 1.05;
                    }
                    
                    // –ó–∞–±–∏—Ç–∏–µ –≥–æ–ª–∞
                    if (ball.x - ball.radius < 0) {
                        computerScore++;
                        resetBall();
                    }
                    
                    if (ball.x + ball.radius > canvas.width) {
                        playerScore++;
                        resetBall();
                    }
                    
                    // –î–≤–∏–∂–µ–Ω–∏–µ —Ä–∞–∫–µ—Ç–æ–∫
                    player.y += player.dy;
                    
                    // –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è —Ä–∞–∫–µ—Ç–∫–∞
                    if (computer.y + computer.height / 2 < ball.y) {
                        computer.y += computer.dy;
                    } else {
                        computer.y -= computer.dy;
                    }
                    
                    // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∫–µ—Ç–æ–∫
                    if (player.y < 0) player.y = 0;
                    if (player.y + player.height > canvas.height) player.y = canvas.height - player.height;
                    
                    if (computer.y < 0) computer.y = 0;
                    if (computer.y + computer.height > canvas.height) computer.y = canvas.height - computer.height;
                    
                    requestAnimationFrame(gameLoop);
                }
                
                function resetBall() {
                    ball.x = canvas.width / 2;
                    ball.y = canvas.height / 2;
                    ball.dx = -ball.dx;
                    ball.dy = Math.random() * 8 - 4;
                }
                
                gameLoop();
            }

            // ===== –ò–ì–†–ê 2: –ó–ú–ï–ô–ö–ê =====
            function initSnake(canvas) {
                const ctx = canvas.getContext('2d');
                const box = 20;
                canvas.width = 400;
                canvas.height = 400;
                
                let snake = [{x: 9 * box, y: 10 * box}];
                let direction = null;
                let food = {
                    x: Math.floor(Math.random() * 20) * box,
                    y: Math.floor(Math.random() * 20) * box
                };
                
                let score = 0;
                let game;
                
                // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                document.addEventListener('keydown', changeDirection);
                
                function changeDirection(e) {
                    if (e.key === 'ArrowLeft' && direction !== 'RIGHT') direction = 'LEFT';
                    if (e.key === 'ArrowUp' && direction !== 'DOWN') direction = 'UP';
                    if (e.key === 'ArrowRight' && direction !== 'LEFT') direction = 'RIGHT';
                    if (e.key === 'ArrowDown' && direction !== 'UP') direction = 'DOWN';
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
                function collision(head, array) {
                    for (let i = 0; i < array.length; i++) {
                        if (head.x === array[i].x && head.y === array[i].y) return true;
                    }
                    return false;
                }
                
                // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
                function draw() {
                    // –†–∏—Å—É–µ–º –∑–º–µ–π–∫—É
                    for (let i = 0; i < snake.length; i++) {
                        ctx.fillStyle = i === 0 ? 'var(--main-color)' : 'var(--text-color)';
                        ctx.fillRect(snake[i].x, snake[i].y, box, box);
                        
                        ctx.strokeStyle = 'var(--bg-color)';
                        ctx.strokeRect(snake[i].x, snake[i].y, box, box);
                    }
                    
                    // –†–∏—Å—É–µ–º –µ–¥—É
                    ctx.fillStyle = '#FF5252';
                    ctx.fillRect(food.x, food.y, box, box);
                    
                    // –ü–æ–∑–∏—Ü–∏—è –≥–æ–ª–æ–≤—ã
                    let snakeX = snake[0].x;
                    let snakeY = snake[0].y;
                    
                    // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                    if (direction === 'LEFT') snakeX -= box;
                    if (direction === 'UP') snakeY -= box;
                    if (direction === 'RIGHT') snakeX += box;
                    if (direction === 'DOWN') snakeY += box;
                    
                    // –ï—Å–ª–∏ —Å—ä–µ–ª–∞ –µ–¥—É
                    if (snakeX === food.x && snakeY === food.y) {
                        score++;
                        food = {
                            x: Math.floor(Math.random() * 20) * box,
                            y: Math.floor(Math.random() * 20) * box
                        };
                    } else {
                        snake.pop();
                    }
                    
                    // –ù–æ–≤–∞—è –≥–æ–ª–æ–≤–∞
                    let newHead = {x: snakeX, y: snakeY};
                    
                    // –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã
                    if (
                        snakeX < 0 || snakeY < 0 ||
                        snakeX >= canvas.width || snakeY >= canvas.height ||
                        collision(newHead, snake)
                    ) {
                        clearInterval(game);
                        ctx.font = '40px "Comic Sans MS", cursive';
                        ctx.fillStyle = 'var(--main-color)';
                        ctx.fillText('–ö–æ–Ω–µ—Ü –∏–≥—Ä—ã!', 100, 200);
                        return;
                    }
                    
                    snake.unshift(newHead);
                    
                    // –°—á—ë—Ç
                    ctx.font = '20px "Comic Sans MS", cursive';
                    ctx.fillStyle = 'var(--text-color)';
                    ctx.fillText(`–°—á—ë—Ç: ${score}`, 10, 20);
                }
                
                game = setInterval(draw, 100);
            }

            // ===== –ò–ì–†–ê 3: –ü–õ–ê–¢–§–û–†–ú–ï–† =====
            function initPlatformer(canvas) {
                const ctx = canvas.getContext('2d');
                canvas.width = 500;
                canvas.height = 300;
                
                // –ò–≥—Ä–æ–∫
                const player = {
                    x: 50,
                    y: 200,
                    width: 30,
                    height: 30,
                    speed: 5,
                    dx: 0,
                    dy: 0,
                    jumping: false
                };
                
                // –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã
                const platforms = [
                    {x: 0, y: 250, width: 150, height: 20},
                    {x: 200, y: 200, width: 150, height: 20},
                    {x: 400, y: 150, width: 150, height: 20}
                ];
                
                // –ó–≤—ë–∑–¥—ã
                const stars = [
                    {x: 100, y: 220, collected: false},
                    {x: 250, y: 170, collected: false},
                    {x: 450, y: 120, collected: false}
                ];
                
                let score = 0;
                let gravity = 1;
                
                // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowLeft') player.dx = -player.speed;
                    if (e.key === 'ArrowRight') player.dx = player.speed;
                    if (e.key === 'ArrowUp' && !player.jumping) {
                        player.dy = -15;
                        player.jumping = true;
                    }
                });
                
                document.addEventListener('keyup', (e) => {
                    if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') player.dx = 0;
                });
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
                function checkCollision(player, platform) {
                    return (
                        player.x < platform.x + platform.width &&
                        player.x + player.width > platform.x &&
                        player.y < platform.y + platform.height &&
                        player.y + player.height > platform.y
                    );
                }
                
                // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
                function gameLoop() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // –†–∏—Å—É–µ–º –∏–≥—Ä–æ–∫–∞
                    ctx.fillStyle = 'var(--main-color)';
                    ctx.fillRect(player.x, player.y, player.width, player.height);
                    
                    // –†–∏—Å—É–µ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
                    ctx.fillStyle = 'var(--text-color)';
                    platforms.forEach(platform => {
                        ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
                    });
                    
                    // –†–∏—Å—É–µ–º –∑–≤—ë–∑–¥—ã
                    stars.forEach(star => {
                        if (!star.collected) {
                            ctx.fillStyle = '#FFD700';
                            ctx.beginPath();
                            ctx.arc(star.x, star.y, 8, 0, Math.PI * 2);
                            ctx.fill();
                        }
                    });
                    
                    // –î–≤–∏–∂–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
                    player.x += player.dx;
                    player.y += player.dy;
                    
                    // –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
                    player.dy += gravity;
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º
                    let onPlatform = false;
                    platforms.forEach(platform => {
                        if (
                            player.y + player.height <= platform.y + 10 &&
                            player.y + player.height + player.dy > platform.y &&
                            player.x + player.width > platform.x &&
                            player.x < platform.x + platform.width
                        ) {
                            player.y = platform.y - player.height;
                            player.dy = 0;
                            player.jumping = false;
                            onPlatform = true;
                        }
                    });
                    
                    // –ï—Å–ª–∏ –Ω–µ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
                    if (!onPlatform && player.y + player.height < canvas.height) {
                        player.jumping = true;
                    }
                    
                    // –°–±–æ—Ä –∑–≤—ë–∑–¥
                    stars.forEach(star => {
                        if (
                            !star.collected &&
                            player.x + player.width > star.x - 8 &&
                            player.x < star.x + 8 &&
                            player.y + player.height > star.y - 8 &&
                            player.y < star.y + 8
                        ) {
                            star.collected = true;
                            score++;
                        }
                    });
                    
                    // –ì—Ä–∞–Ω–∏—Ü—ã —ç–∫—Ä–∞–Ω–∞
                    if (player.x < 0) player.x = 0;
                    if (player.x + player.width > canvas.width) player.x = canvas.width - player.width;
                    
                    if (player.y + player.height > canvas.height) {
                        player.y = canvas.height - player.height;
                        player.dy = 0;
                        player.jumping = false;
                    }
                    
                    // –°—á—ë—Ç
                    ctx.font = '20px "Comic Sans MS", cursive';
                    ctx.fillStyle = 'var(--text-color)';
                    ctx.fillText(`–ó–≤—ë–∑–¥—ã: ${score}`, 10, 20);
                    
                    // –ü–æ–±–µ–¥–∞
                    if (score === stars.length) {
                        ctx.font = '30px "Comic Sans MS", cursive';
                        ctx.fillStyle = 'var(--main-color)';
                        ctx.fillText('–ü–æ–±–µ–¥–∞!', 200, 150);
                        return;
                    }
                    
                    requestAnimationFrame(gameLoop);
                }
                
                gameLoop();
            }

            // ===== –ò–ì–†–ê 4: –¢–ï–¢–†–ò–° =====
            function initTetris(canvas) {
                const ctx = canvas.getContext('2d');
                const blockSize = 25;
                canvas.width = 10 * blockSize;
                canvas.height = 20 * blockSize;
                
                // –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ
                const rows = 20;
                const cols = 10;
                let grid = Array(rows).fill().map(() => Array(cols).fill(0));
                
                // –§–∏–≥—É—Ä—ã
                const shapes = [
                    [[1,1,1,1]], // I
                    [[1,1],[1,1]], // O
                    [[1,1,1],[0,1,0]], // T
                    [[1,1,1],[1,0,0]], // L
                    [[1,1,1],[0,0,1]], // J
                    [[0,1,1],[1,1,0]], // S
                    [[1,1,0],[0,1,1]]  // Z
                ];
                
                const colors = [
                    '#FF5252', '#FFD166', '#06D6A0', '#118AB2', '#073B4C', '#7209B7', '#F72585'
                ];
                
                let currentPiece = null;
                let nextPiece = null;
                let currentX = 0;
                let currentY = 0;
                let score = 0;
                let gameOver = false;
                let dropInterval = 1000;
                let lastTime = 0;
                
                // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ–∏–≥—É—Ä—ã
                function newPiece() {
                    if (!nextPiece) {
                        nextPiece = {
                            shape: shapes[Math.floor(Math.random() * shapes.length)],
                            color: colors[Math.floor(Math.random() * colors.length)]
                        };
                    }
                    
                    currentPiece = nextPiece;
                    nextPiece = {
                        shape: shapes[Math.floor(Math.random() * shapes.length)],
                        color: colors[Math.floor(Math.random() * colors.length)]
                    };
                    
                    currentX = Math.floor(cols / 2) - Math.floor(currentPiece.shape[0].length / 2);
                    currentY = 0;
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—Ä–æ–∏–≥—Ä—ã—à
                    if (collision()) {
                        gameOver = true;
                    }
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
                function collision() {
                    for (let y = 0; y < currentPiece.shape.length; y++) {
                        for (let x = 0; x < currentPiece.shape[y].length; x++) {
                            if (
                                currentPiece.shape[y][x] !== 0 &&
                                (currentY + y >= rows ||
                                 currentX + x < 0 ||
                                 currentX + x >= cols ||
                                 grid[currentY + y][currentX + x] !== 0)
                            ) {
                                return true;
                            }
                        }
                    }
                    return false;
                }
                
                // –§–∏–∫—Å–∞—Ü–∏—è —Ñ–∏–≥—É—Ä—ã
                function lockPiece() {
                    for (let y = 0; y < currentPiece.shape.length; y++) {
                        for (let x = 0; x < currentPiece.shape[y].length; x++) {
                            if (currentPiece.shape[y][x] !== 0) {
                                grid[currentY + y][currentX + x] = currentPiece.color;
                            }
                        }
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω–∏–π
                    clearLines();
                    
                    // –ù–æ–≤–∞—è —Ñ–∏–≥—É—Ä–∞
                    newPiece();
                }
                
                // –û—á–∏—Å—Ç–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –ª–∏–Ω–∏–π
                function clearLines() {
                    let linesCleared = 0;
                    
                    for (let y = rows - 1; y >= 0; y--) {
                        if (grid[y].every(cell => cell !== 0)) {
                            grid.splice(y, 1);
                            grid.unshift(Array(cols).fill(0));
                            linesCleared++;
                            y++; // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç—Ç—É –∂–µ –ø–æ–∑–∏—Ü–∏—é —Å–Ω–æ–≤–∞
                        }
                    }
                    
                    // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á—ë—Ç–∞
                    if (linesCleared > 0) {
                        score += linesCleared * 100;
                        dropInterval = Math.max(100, dropInterval - 50);
                    }
                }
                
                // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                document.addEventListener('keydown', (e) => {
                    if (gameOver) return;
                    
                    switch(e.key) {
                        case 'ArrowLeft':
                            currentX--;
                            if (collision()) currentX++;
                            break;
                        case 'ArrowRight':
                            currentX++;
                            if (collision()) currentX--;
                            break;
                        case 'ArrowDown':
                            currentY++;
                            if (collision()) {
                                currentY--;
                                lockPiece();
                            }
                            break;
                        case 'ArrowUp':
                            rotatePiece();
                            break;
                    }
                });
                
                // –ü–æ–≤–æ—Ä–æ—Ç —Ñ–∏–≥—É—Ä—ã
                function rotatePiece() {
                    const originalShape = currentPiece.shape;
                    const rows = currentPiece.shape.length;
                    const cols = currentPiece.shape[0].length;
                    
                    // –¢—Ä–∞–Ω—Å–ø–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ç—Ä–∏—Ü—ã
                    let newShape = Array(cols).fill().map(() => Array(rows).fill(0));
                    for (let y = 0; y < rows; y++) {
                        for (let x = 0; x < cols; x++) {
                            newShape[x][rows - 1 - y] = currentPiece.shape[y][x];
                        }
                    }
                    
                    currentPiece.shape = newShape;
                    if (collision()) {
                        currentPiece.shape = originalShape;
                    }
                }
                
                // –û—Ç—Ä–∏—Å–æ–≤–∫–∞
                function draw() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // –†–∏—Å—É–µ–º —Å–µ—Ç–∫—É
                    for (let y = 0; y < rows; y++) {
                        for (let x = 0; x < cols; x++) {
                            if (grid[y][x] !== 0) {
                                ctx.fillStyle = grid[y][x];
                                ctx.fillRect(x * blockSize, y * blockSize, blockSize, blockSize);
                                ctx.strokeStyle = 'rgba(0,0,0,0.2)';
                                ctx.strokeRect(x * blockSize, y * blockSize, blockSize, blockSize);
                            }
                        }
                    }
                    
                    // –†–∏—Å—É–µ–º —Ç–µ–∫—É—â—É—é —Ñ–∏–≥—É—Ä—É
                    if (currentPiece) {
                        for (let y = 0; y < currentPiece.shape.length; y++) {
                            for (let x = 0; x < currentPiece.shape[y].length; x++) {
                                if (currentPiece.shape[y][x] !== 0) {
                                    ctx.fillStyle = currentPiece.color;
                                    ctx.fillRect(
                                        (currentX + x) * blockSize,
                                        (currentY + y) * blockSize,
                                        blockSize,
                                        blockSize
                                    );
                                    ctx.strokeStyle = 'rgba(0,0,0,0.2)';
                                    ctx.strokeRect(
                                        (currentX + x) * blockSize,
                                        (currentY + y) * blockSize,
                                        blockSize,
                                        blockSize
                                    );
                                }
                            }
                        }
                    }
                    
                    // –°—á—ë—Ç
                    ctx.font = '20px "Comic Sans MS", cursive';
                    ctx.fillStyle = 'var(--text-color)';
                    ctx.fillText(`–°—á—ë—Ç: ${score}`, 10, 20);
                    
                    // –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã
                    if (gameOver) {
                        ctx.font = '30px "Comic Sans MS", cursive';
                        ctx.fillStyle = 'var(--main-color)';
                        ctx.fillText('–ö–æ–Ω–µ—Ü –∏–≥—Ä—ã!', 100, canvas.height / 2);
                    }
                }
                
                // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
                function update(time = 0) {
                    if (gameOver) return;
                    
                    const deltaTime = time - lastTime;
                    
                    if (deltaTime > dropInterval) {
                        currentY++;
                        if (collision()) {
                            currentY--;
                            lockPiece();
                        }
                        lastTime = time;
                    }
                    
                    draw();
                    requestAnimationFrame(update);
                }
                
                // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
                newPiece();
                update();
            }

            // ===== –ò–ì–†–ê 5: –ê–†–ö–ê–ù–û–ò–î =====
            function initArkanoid(canvas) {
                const ctx = canvas.getContext('2d');
                canvas.width = 500;
                canvas.height = 400;
                
                // –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞
                const paddle = {
                    x: canvas.width / 2 - 50,
                    y: canvas.height - 20,
                    width: 100,
                    height: 15,
                    speed: 8,
                    dx: 0
                };
                
                // –ú—è—á
                const ball = {
                    x: canvas.width / 2,
                    y: canvas.height - 30,
                    radius: 10,
                    speed: 4,
                    dx: 3,
                    dy: -3
                };
                
                // –ö–∏—Ä–ø–∏—á–∏
                const brickRowCount = 5;
                const brickColumnCount = 8;
                const brickWidth = 55;
                const brickHeight = 20;
                const brickPadding = 10;
                const brickOffsetTop = 60;
                const brickOffsetLeft = 30;
                
                const bricks = [];
                for (let r = 0; r < brickRowCount; r++) {
                    bricks[r] = [];
                    for (let c = 0; c < brickColumnCount; c++) {
                        bricks[r][c] = {
                            x: c * (brickWidth + brickPadding) + brickOffsetLeft,
                            y: r * (brickHeight + brickPadding) + brickOffsetTop,
                            width: brickWidth,
                            height: brickHeight,
                            color: `hsl(${Math.random() * 360}, 70%, 50%)`,
                            visible: true
                        };
                    }
                }
                
                let score = 0;
                let lives = 3;
                
                // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                document.addEventListener('keydown', keyDown);
                document.addEventListener('keyup', keyUp);
                
                function keyDown(e) {
                    if (e.key === 'ArrowLeft') paddle.dx = -paddle.speed;
                    if (e.key === 'ArrowRight') paddle.dx = paddle.speed;
                }
                
                function keyUp(e) {
                    if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') paddle.dx = 0;
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
                function collisionDetection() {
                    for (let r = 0; r < brickRowCount; r++) {
                        for (let c = 0; c < brickColumnCount; c++) {
                            const brick = bricks[r][c];
                            if (brick.visible) {
                                if (
                                    ball.x > brick.x &&
                                    ball.x < brick.x + brick.width &&
                                    ball.y > brick.y &&
                                    ball.y < brick.y + brick.height
                                ) {
                                    ball.dy = -ball.dy;
                                    brick.visible = false;
                                    score++;
                                    
                                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
                                    if (score === brickRowCount * brickColumnCount) {
                                        alert('–ü–æ–±–µ–¥–∞!');
                                        document.location.reload();
                                    }
                                }
                            }
                        }
                    }
                }
                
                // –î–≤–∏–∂–µ–Ω–∏–µ –º—è—á–∞
                function moveBall() {
                    ball.x += ball.dx;
                    ball.y += ball.dy;
                    
                    // –°—Ç–µ–Ω—ã
                    if (ball.x + ball.radius > canvas.width || ball.x - ball.radius < 0) {
                        ball.dx = -ball.dx;
                    }
                    
                    // –í–µ—Ä—Ö–Ω—è—è —Å—Ç–µ–Ω–∞
                    if (ball.y - ball.radius < 0) {
                        ball.dy = -ball.dy;
                    }
                    
                    // –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞
                    if (
                        ball.y + ball.radius > paddle.y &&
                        ball.y + ball.radius < paddle.y + paddle.height &&
                        ball.x > paddle.x &&
                        ball.x < paddle.x + paddle.width
                    ) {
                        ball.dy = -ball.dy;
                        
                        // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–µ—Å—Ç–∞ —É–¥–∞—Ä–∞
                        const hitPos = (ball.x - (paddle.x + paddle.width / 2)) / (paddle.width / 2);
                        ball.dx = hitPos * 5;
                    }
                    
                    // –ù–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞
                    if (ball.y + ball.radius > canvas.height) {
                        lives--;
                        if (lives <= 0) {
                            alert('–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!');
                            document.location.reload();
                        } else {
                            resetBall();
                        }
                    }
                }
                
                // –°–±—Ä–æ—Å –º—è—á–∞
                function resetBall() {
                    ball.x = canvas.width / 2;
                    ball.y = canvas.height - 30;
                    ball.dx = 3 * (Math.random() > 0.5 ? 1 : -1);
                    ball.dy = -3;
                    paddle.x = canvas.width / 2 - 50;
                    paddle.dx = 0;
                }
                
                // –û—Ç—Ä–∏—Å–æ–≤–∫–∞
                function draw() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // –†–∏—Å—É–µ–º –∫–∏—Ä–ø–∏—á–∏
                    bricks.forEach(row => {
                        row.forEach(brick => {
                            if (brick.visible) {
                                ctx.fillStyle = brick.color;
                                ctx.fillRect(brick.x, brick.y, brick.width, brick.height);
                                ctx.strokeStyle = '#000';
                                ctx.strokeRect(brick.x, brick.y, brick.width, brick.height);
                            }
                        });
                    });
                    
                    // –†–∏—Å—É–µ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—É
                    ctx.fillStyle = 'var(--text-color)';
                    ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);
                    
                    // –†–∏—Å—É–µ–º –º—è—á
                    ctx.fillStyle = 'var(--main-color)';
                    ctx.beginPath();
                    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // –°—á—ë—Ç –∏ –∂–∏–∑–Ω–∏
                    ctx.font = '20px "Comic Sans MS", cursive';
                    ctx.fillStyle = 'var(--text-color)';
                    ctx.fillText(`–°—á—ë—Ç: ${score}`, 10, 20);
                    ctx.fillText(`–ñ–∏–∑–Ω–∏: ${lives}`, canvas.width - 100, 20);
                }
                
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–≥—Ä—ã
                function update() {
                    // –î–≤–∏–∂–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
                    paddle.x += paddle.dx;
                    
                    // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
                    if (paddle.x < 0) paddle.x = 0;
                    if (paddle.x + paddle.width > canvas.width) paddle.x = canvas.width - paddle.width;
                    
                    // –î–≤–∏–∂–µ–Ω–∏–µ –º—è—á–∞
                    moveBall();
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
                    collisionDetection();
                    
                    // –û—Ç—Ä–∏—Å–æ–≤–∫–∞
                    draw();
                    
                    requestAnimationFrame(update);
                }
                
                update();
            }
        });
    </script>
</body>
</html>
